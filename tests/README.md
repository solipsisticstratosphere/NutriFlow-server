# üß™ NutriFlow API Tests

–£—Å—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É NutriFlow API.

## –°–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç—ñ–≤

### 1. **test-api.js** - –ü–æ–≤–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API
–ö–æ–º–ø–ª–µ–∫—Å–Ω–∏–π —Ç–µ—Å—Ç –≤—Å—ñ—Ö –æ—Å–Ω–æ–≤–Ω–∏—Ö endpoints:
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è, –ª–æ–≥—ñ–Ω)
- ‚úÖ –ü—Ä–æ–¥—É–∫—Ç–∏ (CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó)
- ‚úÖ –ü—Ä–∏–π–æ–º–∏ —ó–∂—ñ (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, –≤–∏–¥–∞–ª–µ–Ω–Ω—è)
- ‚úÖ –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- ‚úÖ Rate limiting

**–ó–∞–ø—É—Å–∫:**
```bash
npm run test:api
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç–∏:** 34/35 —Ç–µ—Å—Ç—ñ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ (97.1% —É—Å–ø—ñ—Ö)

---

### 2. **test-ai-suggestions.js** - –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
–¢–µ—Å—Ç—É—î endpoint –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π:
- ‚úÖ –õ–æ–≥—ñ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É—é—á–∏—Ö –ø—Ä–∏–π–æ–º—ñ–≤ —ó–∂—ñ
- ‚úÖ –û—Ç—Ä–∏–º–∞–Ω–Ω—è AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π (–ø—Ä–æ–¥—É–∫—Ç–∏, —Å—Ç—Ä–∞–≤–∏, –ø–æ—Ä–∞–¥–∏)
- ‚úÖ –ß–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ AI (5-30 —Å–µ–∫—É–Ω–¥)

**–ó–∞–ø—É—Å–∫:**
```bash
npm run test:ai-suggestions
```

**–©–æ —Ç–µ—Å—Ç—É—î:**
- –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç–∏
- –Ü–¥–µ—ó —Å—Ç—Ä–∞–≤
- –ü–æ—Ä–∞–¥–∏ –ø–æ –≤–æ–¥—ñ
- –ü–æ–±—É—Ç–æ–≤—ñ –ø–æ—Ä–∞–¥–∏

---

### 3. **test-cache.js** - –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è AI –∫–µ—à—É–≤–∞–Ω–Ω—è
–î–µ–º–æ–Ω—Å—Ç—Ä—É—î –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∫–µ—à—É–≤–∞–Ω–Ω—è AI –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π:
- ‚úÖ 1-–π –∑–∞–ø–∏—Ç: ~6719ms (–ø–æ–≤–Ω–∏–π AI –∑–∞–ø–∏—Ç)
- ‚úÖ 2-–π –∑–∞–ø–∏—Ç: ~173ms (–∑ –∫–µ—à—É, **97.4% —à–≤–∏–¥—à–µ**)

**–ó–∞–ø—É—Å–∫:**
```bash
npm run test:cache
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ï–∫–æ–Ω–æ–º—ñ—è —á–∞—Å—É —Ç–∞ API –∫–≤–æ—Ç–∏ Hugging Face

---

### 4. **test-water-tracking.js** - –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–æ–¥–∏
–ü–æ–≤–Ω–∏–π —Ç–µ—Å—Ç —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –≤–æ–¥–∏:
- ‚úÖ –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –¥–µ–Ω–Ω–æ–≥–æ –ª–æ–≥—É
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –≤–æ–¥–∏ (500ml ‚Üí 1500ml ‚Üí 2200ml)
- ‚úÖ –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–æ–¥–∏ + –≤–∞–≥–∏ + –Ω–æ—Ç–∞—Ç–æ–∫
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è (–≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å)

**–ó–∞–ø—É—Å–∫:**
```bash
npm run test:water
```

**–©–æ —Ç–µ—Å—Ç—É—î:**
- PUT /api/analytics/daily (–≤–æ–¥a)
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è: 0-10000 –º–ª
- –û–¥–Ω–æ—á–∞—Å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–æ–¥–∏, –≤–∞–≥–∏, –Ω–æ—Ç–∞—Ç–æ–∫

---

### 5. **test-validation-direct.js** - –ü—Ä—è–º–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
–î–µ—Ç–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó endpoints:
- ‚úÖ –í–∞–ª—ñ–¥–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è ‚Üí 200 OK
- ‚úÖ –ù–µ–≤–∞–ª—ñ–¥–Ω–∞ –≤–æ–¥–∞ (15000ml, -100ml) ‚Üí 400 Error
- ‚úÖ –ù–µ–≤–∞–ª—ñ–¥–Ω–∞ –≤–∞–≥–∞ (600kg) ‚Üí 400 Error
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏

**–ó–∞–ø—É—Å–∫:**
```bash
npm run test:validation
```

---

### 6. **full-test.js** - –ü–æ–≤–Ω–∏–π workflow —Ç–µ—Å—Ç
–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤–Ω–æ–≥–æ —Ä–æ–±–æ—á–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É –≤—ñ–¥ –ø–æ—á–∞—Ç–∫—É –¥–æ –∫—ñ–Ω—Ü—è:
- ‚úÖ –û—á–∏—â–µ–Ω–Ω—è –ë–î
- ‚úÖ –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏ (seeder)
- ‚úÖ –õ–æ–≥—ñ–Ω
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ —á–µ—Ä–µ–∑ AI
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–∏–π–æ–º—É —ó–∂—ñ
- ‚úÖ –û—Ç—Ä–∏–º–∞–Ω–Ω—è AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π

**–ó–∞–ø—É—Å–∫:**
```bash
npm run test:full
```

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** –î–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤—Å—å–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É –ø—ñ—Å–ª—è –∑–º—ñ–Ω

---

### 7. **test-ai.js** - –ë–∞–∑–æ–≤–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è AI
–®–≤–∏–¥–∫–∏–π —Ç–µ—Å—Ç AI —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤:
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—É –∑–∞ –Ω–∞–∑–≤–æ—é —á–µ—Ä–µ–∑ AI
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ö–ë–ñ–£ —Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó

**–ó–∞–ø—É—Å–∫:**
```bash
npm run test:ai
```

---

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ —Ç–µ—Å—Ç–∏
```bash
npm run test:all
```

### –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ç–µ—Å—Ç
```bash
npm run test:api          # API —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
npm run test:ai           # AI —Ñ—É–Ω–∫—Ü—ñ—ó
npm run test:water        # –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–æ–¥–∏
npm run test:validation   # –í–∞–ª—ñ–¥–∞—Ü—ñ—è
npm run test:cache        # –ö–µ—à—É–≤–∞–Ω–Ω—è
npm run test:full         # –ü–æ–≤–Ω–∏–π workflow
```

## –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Ç–µ—Å—Ç—ñ–≤

1. **–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π:**
   ```bash
   npm start
   ```

2. **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –º–∞—î –±—É—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω–∞** (MongoDB)

3. **–î–ª—è –ø–æ–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç—É —Å–ø–æ—á–∞—Ç–∫—É —Å–∫–∏–Ω—å—Ç–µ –ë–î:**
   ```bash
   npm run db:reset
   npm run test:full
   ```

## –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

| –¢–µ—Å—Ç | –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è | –£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å |
|------|---------------|------------|
| test-api.js | ~10-15 —Å–µ–∫ | 97.1% (34/35) |
| test-ai-suggestions.js | ~10-30 —Å–µ–∫ | 100% |
| test-cache.js | ~10 —Å–µ–∫ | 100% |
| test-water-tracking.js | ~5 —Å–µ–∫ | 100% |
| test-validation-direct.js | ~3 —Å–µ–∫ | 100% |
| full-test.js | ~30-60 —Å–µ–∫ | 100% |
| test-ai.js | ~5-10 —Å–µ–∫ | 100% |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—ñ–≤

```
tests/
‚îú‚îÄ‚îÄ README.md                    # –¶—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ test-api.js                  # –ü–æ–≤–Ω–µ API —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ test-ai-suggestions.js       # AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ test-ai.js                   # AI —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤
‚îú‚îÄ‚îÄ test-cache.js                # AI –∫–µ—à—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ test-water-tracking.js       # –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–æ–¥–∏
‚îú‚îÄ‚îÄ test-validation-direct.js    # –í–∞–ª—ñ–¥–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ full-test.js                 # –ü–æ–≤–Ω–∏–π workflow
```

## Troubleshooting

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π
```
‚ùå Error: connect ECONNREFUSED 127.0.0.1:5001
```
**–†—ñ—à–µ–Ω–Ω—è:** –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä: `npm start`

### –ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
```
‚ùå Login failed: Invalid credentials
```
**–†—ñ—à–µ–Ω–Ω—è:** –°–∫–∏–Ω—å—Ç–µ –ë–î: `npm run db:reset`

### AI timeout
```
‚ö†Ô∏è AI recommendations timed out
```
**–†—ñ—à–µ–Ω–Ω—è:** –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, AI –º–æ–∂–µ –±—É—Ç–∏ –ø–æ–≤—ñ–ª—å–Ω–∏–º. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.

### Port –≤–∂–µ –∑–∞–π–Ω—è—Ç–∏–π
```
Error: EADDRINUSE
```
**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# Windows
taskkill /F /IM node.exe

# Linux/Mac
pkill node
```

## –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

- **–¢–µ—Å—Ç–æ–≤–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á:** olena@example.com / Test123
- **Server port:** 5001 (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
- **Swagger docs:** http://localhost:5001/api-docs
- **MongoDB:** –í–∫–∞–∑–∞–Ω–∏–π –≤ .env —Ñ–∞–π–ª—ñ

## –©–æ –¥–∞–ª—ñ?

–î–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ç–µ—Å—Ç—ñ–≤:
1. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `test-{–Ω–∞–∑–≤–∞–Ω–∏–µ}.js`
2. –î–æ–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤ `package.json`
3. –û–Ω–æ–≤—ñ—Ç—å —Ü–µ–π README
4. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

---

**Happy Testing! üöÄ**
